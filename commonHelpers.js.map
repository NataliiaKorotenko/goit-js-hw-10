{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst dateToday = new Date();\nlet timerId = null;\nlet selectedDateSecond = null;\nconst buttonStart = document.querySelector('button[data-start]');\nbuttonStart.addEventListener('click', startTimer);\nbuttonStart.setAttribute('disabled', 'disabled');\n\nconst spanDays = document.querySelector('span[data-days]');\nconst spanHours = document.querySelector('span[data-hours]');\nconst spanMin = document.querySelector('span[data-minutes]');\nconst spanSec = document.querySelector('span[data-seconds]');\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onOpen() {\n    clearInterval(timerId);\n    timerId = null;\n    addItem(0);\n  },\n  onClose(selectedDates) {\n    selectedDateSecond = selectedDates[0].getTime();\n    checkDate(selectedDateSecond);\n  },\n};\n\nflatpickr('#datetime-picker', options);\n\nfunction checkDate(selectedDateSecond) {\n  const dateNow = new Date().getTime();\n  if (selectedDateSecond > dateNow) {\n    buttonStart.removeAttribute('disabled');\n  } else {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please choose a date in the future',\n    });\n    buttonStart.setAttribute('disabled', 'disabled');\n  }\n}\n\nfunction startTimer(event) {\n  event.preventDefault();\n  if (timerId) {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'The timer has already started!',\n    });\n    return;\n  }\n\n  buttonStart.setAttribute('disabled', 'disabled');\n  document\n    .querySelector('#datetime-picker')\n    .setAttribute('disabled', 'disabled');\n\n  timerId = setInterval(() => {\n    const dateNow = new Date().getTime();\n    const timer = selectedDateSecond - dateNow;\n\n    if (timer <= 0) {\n      iziToast.success({\n        title: 'Success',\n        message: 'Timer is completed!',\n      });\n      clearInterval(timerId);\n      addItem(0);\n      document.querySelector('#datetime-picker').removeAttribute('disabled');\n      return;\n    }\n\n    addItem(timer);\n  }, 1000);\n}\n\nfunction addItem(timer) {\n  const { days, hours, minutes, seconds } = convertMs(timer);\n  spanDays.textContent = addLeadingZero(days);\n  spanHours.textContent = addLeadingZero(hours);\n  spanMin.textContent = addLeadingZero(minutes);\n  spanSec.textContent = addLeadingZero(seconds);\n}\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n\n// console.dir(spanSec)\n\n//console.log(convertMs(2000)); // {days: 0, hours: 0, minutes: 0, seconds: 2}\n//console.log(convertMs(140000)); // {days: 0, hours: 0, minutes: 2, seconds: 20}\n//console.log(convertMs(24140000)); // {days: 0, hours: 6 minutes: 42, seconds: 20}\n"],"names":["timerId","selectedDateSecond","buttonStart","startTimer","spanDays","spanHours","spanMin","spanSec","options","addItem","selectedDates","checkDate","flatpickr","dateNow","iziToast","event","timer","days","hours","minutes","seconds","convertMs","addLeadingZero","ms","value"],"mappings":"sGAOA,IAAIA,EAAU,KACVC,EAAqB,KACzB,MAAMC,EAAc,SAAS,cAAc,oBAAoB,EAC/DA,EAAY,iBAAiB,QAASC,CAAU,EAChDD,EAAY,aAAa,WAAY,UAAU,EAE/C,MAAME,EAAW,SAAS,cAAc,iBAAiB,EACnDC,EAAY,SAAS,cAAc,kBAAkB,EACrDC,EAAU,SAAS,cAAc,oBAAoB,EACrDC,EAAU,SAAS,cAAc,oBAAoB,EAErDC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAS,CACP,cAAcR,CAAO,EACrBA,EAAU,KACVS,EAAQ,CAAC,CACV,EACD,QAAQC,EAAe,CACrBT,EAAqBS,EAAc,CAAC,EAAE,QAAO,EAC7CC,EAAUV,CAAkB,CAC7B,CACH,EAEAW,EAAU,mBAAoBJ,CAAO,EAErC,SAASG,EAAUV,EAAoB,CACrC,MAAMY,EAAU,IAAI,KAAM,EAAC,QAAO,EAC9BZ,EAAqBY,EACvBX,EAAY,gBAAgB,UAAU,GAEtCY,EAAS,MAAM,CACb,MAAO,QACP,QAAS,oCACf,CAAK,EACDZ,EAAY,aAAa,WAAY,UAAU,EAEnD,CAEA,SAASC,EAAWY,EAAO,CAEzB,GADAA,EAAM,eAAc,EAChBf,EAAS,CACXc,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,gCACf,CAAK,EACD,MACD,CAEDZ,EAAY,aAAa,WAAY,UAAU,EAC/C,SACG,cAAc,kBAAkB,EAChC,aAAa,WAAY,UAAU,EAEtCF,EAAU,YAAY,IAAM,CAC1B,MAAMa,EAAU,IAAI,KAAM,EAAC,QAAO,EAC5BG,EAAQf,EAAqBY,EAEnC,GAAIG,GAAS,EAAG,CACdF,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,qBACjB,CAAO,EACD,cAAcd,CAAO,EACrBS,EAAQ,CAAC,EACT,SAAS,cAAc,kBAAkB,EAAE,gBAAgB,UAAU,EACrE,MACD,CAEDA,EAAQO,CAAK,CACd,EAAE,GAAI,CACT,CAEA,SAASP,EAAQO,EAAO,CACtB,KAAM,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUL,CAAK,EACzDZ,EAAS,YAAckB,EAAeL,CAAI,EAC1CZ,EAAU,YAAciB,EAAeJ,CAAK,EAC5CZ,EAAQ,YAAcgB,EAAeH,CAAO,EAC5CZ,EAAQ,YAAce,EAAeF,CAAO,CAC9C,CAEA,SAASC,EAAUE,EAAI,CAMrB,MAAMN,EAAO,KAAK,MAAMM,EAAK,KAAG,EAC1BL,EAAQ,KAAK,MAAOK,EAAK,MAAO,IAAI,EACpCJ,EAAU,KAAK,MAAQI,EAAK,MAAO,KAAQ,GAAM,EACjDH,EAAU,KAAK,MAASG,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAN,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASE,EAAeE,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC"}